{% extends 'base_carrito.html' %}

{% block title %} Credenciales Inapam {% endblock %}

{% block body %}
    <div class="row">
        <div class="col-sm-3 col-md-2 sidebar">
            <ul class="nav nav-sidebar">
                <li class="{% if filter == 'todos' %} active {% endif %}"><a href="{% url 'inapams' %}?filter=todos">Todos <span class="sr-only">(current)</span></a></li>
                <li class="{% if filter == 'activos' %} active {% endif %}"><a href="{% url 'inapams' %}?filter=activos">Activos <span class="badge">{{buenos}}</span></a></li>
                <li class="{% if filter == 'inactivos' %} active {% endif %}"><a href="{% url 'inapams' %}?filter=inactivos">Inactivos <span class="badge">{{malos}}</span></a></li>
              </ul>
        </div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
        <br/>
          <h1 class="page-header">Credenciales de Inapam</h1>
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>#</th>
                  <th>Usuario</th>
                  <th>Credencial</th>
                  <th>Estatus</th>
                  <th>Acciones</th>
                </tr>
              </thead>
              <tbody>
                {% for registro in registros %}
                    {% include "item_inapam.html" with registro=registro %}
                {% endfor %}
              </tbody>
            </table>
            </div>
          </div>
        </div>
      </div>
      <div class="row text-center">
            <ul class="pagination">
                <li>
                  {% if ratings.has_previous %}
                      <a href="?page={{ registros.previous_page_number }}">
                        <span aria-hidden="true">&laquo;</span>
                      </a>
                  {% endif %}
                </li>
                <li>
                    <span class="current">
                        Pagina {{ registros.number }} de {{ registros.paginator.num_pages }}.
                    </span>
                </li>
                <li>
                  {% if ratings.has_next %}
                      <a href="?page={{ registros.next_page_number }}">
                        <span aria-hidden="true">&raquo;</span>
                      </a>
                    {% endif %}
                </li>
            </ul>
        </div>
{% endblock %}
{% block  javascripts %}
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script>
      (function(){
          function activarBotonesAccion(){
            $(".button-action").on("click",function(){
                var $button = $(this);
                var url = $button.data("url");
                var registro = $button.parent().parent().parent().parent().data("registro");
                console.log(url);
                $.ajax({
                  url: url,
                  type: 'post',
                  success: function(data) {
                      //alert(data);
                      console.log(data);
                      $("#registro-"+registro).html($(data).html());
                      activarBotonesAccion();
                  },
                  failure: function(data) {
                      alert('Got an error dude');
                  }
              });
            });
          }
          activarBotonesAccion();
      })();
    </script>
{% endblock %}